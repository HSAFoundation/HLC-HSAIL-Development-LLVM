1. Add lit tests
2. Fix warnings
3. Remove hack to force object emission in HSAILTargetMachine constructor 
